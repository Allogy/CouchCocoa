<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CouchCocoa: CouchModel Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CouchCocoa</div>
   <div id="projectbrief">An Objective-C API for CouchDB</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('interfaceCouchModel.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">CouchModel Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CouchModel" --><!-- doxytag: inherits="CouchDynamicObject" -->
<p>Generic model class for Couch documents.  
 <a href="interfaceCouchModel.html#details">More...</a></p>

<p><code>#import &lt;<a class="el" href="CouchModel_8h_source.html">CouchModel.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CouchModel:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interfaceCouchModel.png" usemap="#CouchModel_map" alt=""/>
  <map id="CouchModel_map" name="CouchModel_map">
<area href="interfaceCouchDynamicObject.html" title="A generic class with runtime support for dynamic properties." alt="CouchDynamicObject" shape="rect" coords="0,0,166,24"/>
<area href="interfaceCouchPersistentReplication.html" title="A model object representing a persistent replication to or from another database." alt="CouchPersistentReplication" shape="rect" coords="0,112,166,136"/>
</map>
 </div></div>

<p><a href="classCouchModel-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#aa3138fe8f026c4a27b84e7ba94da4e3e">initWithNewDocumentInDatabase:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new "untitled" model with a new unsaved document.  <a href="#aa3138fe8f026c4a27b84e7ba94da4e3e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a92896d1106ca5012c96e60107a680ab1">init</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new "untitled" model object with no document or database at all yet.  <a href="#a92896d1106ca5012c96e60107a680ab1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interfaceRESTOperation.html">RESTOperation</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a1388498ae6ae967c7ae6ba7ac90436f2">save</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes any changes to a new revision of the document, asynchronously.  <a href="#a1388498ae6ae967c7ae6ba7ac90436f2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(NSDictionary *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a2b2ac66c9a991a9b7ff4c602fe6cadef">propertiesToSave</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The document's current properties, in externalized JSON format.  <a href="#a2b2ac66c9a991a9b7ff4c602fe6cadef"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interfaceRESTOperation.html">RESTOperation</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#ac56b79c68cb38e51a27514ef56f3fa31">deleteDocument</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes the document from the database.  <a href="#ac56b79c68cb38e51a27514ef56f3fa31"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a13e10962997149aca9870e2a4fcbb6e2">markExternallyChanged</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the timeSinceExternallyChanged property to zero.  <a href="#a13e10962997149aca9870e2a4fcbb6e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a2c0b406cb0278a80cbc51fc96ec86837">getValueOfProperty:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a property by name.  <a href="#a2c0b406cb0278a80cbc51fc96ec86837"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a108cad119ff627a2c665d1c988c8937f">setValue:ofProperty:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets a property by name.  <a href="#a108cad119ff627a2c665d1c988c8937f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interfaceCouchAttachment.html">CouchAttachment</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a8d6a5741df258e9ea7a98906cb1616d1">attachmentNamed:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Looks up the attachment with the given name (without fetching its contents).  <a href="#a8d6a5741df258e9ea7a98906cb1616d1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interfaceCouchAttachment.html">CouchAttachment</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a8a4b8ba6030a487b023a38c8455cbc1a">createAttachmentWithName:type:body:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates or updates an attachment (in memory).  <a href="#a8a4b8ba6030a487b023a38c8455cbc1a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a5625af6098ee1d1ff96a6d771b9764c5">removeAttachmentNamed:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Deletes (in memory) any existing attachment with the given name.  <a href="#a5625af6098ee1d1ff96a6d771b9764c5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a81b7a07079896f59a03c4a388e1d443b">initWithDocument:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Designated initializer.  <a href="#a81b7a07079896f59a03c4a388e1d443b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a33028beee6c908ada9cb4e9be5d7dca9">idForNewDocumentInDatabase:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The document ID to use when creating a new document.  <a href="#a33028beee6c908ada9cb4e9be5d7dca9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#a13aa73db92e5023fbe90000f7c60707e">didLoadFromDocument</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Called when the model's properties are reloaded from the document.  <a href="#a13aa73db92e5023fbe90000f7c60707e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interfaceCouchDatabase.html">CouchDatabase</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchModel.html#aca9177926e4614f6275f96d11288caae">databaseForModelProperty:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the database in which to look up the document ID of a model-valued property.  <a href="#aca9177926e4614f6275f96d11288caae"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(id)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfaceCouchModel.html#a70f250e676f3c37f434f7dc86b6e51e9">modelForDocument:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the <a class="el" href="interfaceCouchModel.html" title="Generic model class for Couch documents.">CouchModel</a> associated with a <a class="el" href="interfaceCouchDocument.html" title="A CouchDB document, aka &quot;record&quot; aka &quot;row&quot;.">CouchDocument</a>, or creates &amp; assigns one if necessary.  <a href="#a70f250e676f3c37f434f7dc86b6e51e9"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interfaceRESTOperation.html">RESTOperation</a> *)&#160;</td><td class="memItemRight" valign="bottom">+ <a class="el" href="interfaceCouchModel.html#a555ee3fd25954aae0018b0e1ffa0a18b">saveModels:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Bulk-saves changes to multiple model objects (which must all be in the same database).  <a href="#a555ee3fd25954aae0018b0e1ffa0a18b"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceCouchDocument.html">CouchDocument</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchModel.html#a9b690fa2ea88e4e228e672dc553d393c">document</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The document this item is associated with.  <a href="#a9b690fa2ea88e4e228e672dc553d393c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="interfaceCouchDatabase.html">CouchDatabase</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchModel.html#a6ee5e60c15aa738113958d7db30f494b">database</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The database the item's document belongs to.  <a href="#a6ee5e60c15aa738113958d7db30f494b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1c31b62210541dfd9f8f4ca798680669"></a><!-- doxytag: member="CouchModel::isNew" ref="a1c31b62210541dfd9f8f4ca798680669" args="" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchModel.html#a1c31b62210541dfd9f8f4ca798680669">isNew</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Is this model new, never before saved? <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchModel.html#a63fbfd1e32a28fb1425aea2310f9b346">autosaves</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Should changes be saved back to the database automatically? Defaults to NO, requiring you to call -save manually.  <a href="#a63fbfd1e32a28fb1425aea2310f9b346"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac9d5b139c8d40dfd87ef7840f04c4bce"></a><!-- doxytag: member="CouchModel::needsSave" ref="ac9d5b139c8d40dfd87ef7840f04c4bce" args="" -->
bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchModel.html#ac9d5b139c8d40dfd87ef7840f04c4bce">needsSave</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Does this model have unsaved changes? <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NSTimeInterval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchModel.html#aa62db60d053b4e5045a3aada7077f3e4">timeSinceExternallyChanged</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The time interval since the document was last changed externally (e.g.  <a href="#aa62db60d053b4e5045a3aada7077f3e4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NSArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchModel.html#a8ed3b496cca0e57a30079374c16e505d">attachmentNames</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The names of all attachments (array of strings).  <a href="#a8ed3b496cca0e57a30079374c16e505d"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Generic model class for Couch documents. </p>
<p>There's a 1::1 mapping between these and CouchDocuments; call +modelForDocument: to get (or create) a model object for a document, and .document to get the document of a model. You should subclass this and declare properties in the subclass's @interface. As with NSManagedObject, you don't need to implement their accessor methods or declare instance variables; simply note them as '@dynamic' in the class @implementation. The property value will automatically be fetched from or stored to the document, using the same name. Supported scalar types are bool, char, short, int, double. These map to JSON numbers, except 'bool' which maps to JSON 'true' and 'false'. (Use bool instead of BOOL.) Supported object types are NSString, NSNumber, NSData, NSDate, NSArray, NSDictionary. (NSData and NSDate are not native JSON; they will be automatically converted to/from strings in base64 and ISO date formats, respectively.) Additionally, a property's type can be a pointer to a <a class="el" href="interfaceCouchModel.html" title="Generic model class for Couch documents.">CouchModel</a> subclass. This provides references between model objects. The raw property value in the document must be a string whose value is interpreted as a document ID. </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a70f250e676f3c37f434f7dc86b6e51e9"></a><!-- doxytag: member="CouchModel::modelForDocument:" ref="a70f250e676f3c37f434f7dc86b6e51e9" args="(CouchDocument *document)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (id) modelForDocument: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interfaceCouchDocument.html">CouchDocument</a> *)&#160;</td>
          <td class="paramname"><em>document</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the <a class="el" href="interfaceCouchModel.html" title="Generic model class for Couch documents.">CouchModel</a> associated with a <a class="el" href="interfaceCouchDocument.html" title="A CouchDB document, aka &quot;record&quot; aka &quot;row&quot;.">CouchDocument</a>, or creates &amp; assigns one if necessary. </p>
<p>If the <a class="el" href="interfaceCouchDocument.html" title="A CouchDB document, aka &quot;record&quot; aka &quot;row&quot;.">CouchDocument</a> already has an associated model, it's returned. Otherwise a new one is instantiated. If you call this on <a class="el" href="interfaceCouchModel.html" title="Generic model class for Couch documents.">CouchModel</a> itself, it'll delegate to the <a class="el" href="interfaceCouchModelFactory.html" title="A configurable mapping from CouchDocument to CouchModel.">CouchModelFactory</a> to decide what class to instantiate; this lets you map different classes to different "type" property values, for instance. If you call this method on a <a class="el" href="interfaceCouchModel.html" title="Generic model class for Couch documents.">CouchModel</a> subclass, it will always instantiate an instance of that class; e.g. [MyWidgetModel modelForDocument: doc] always creates a MyWidgetModel. </p>

</div>
</div>
<a class="anchor" id="aa3138fe8f026c4a27b84e7ba94da4e3e"></a><!-- doxytag: member="CouchModel::initWithNewDocumentInDatabase:" ref="aa3138fe8f026c4a27b84e7ba94da4e3e" args="(CouchDatabase *database)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithNewDocumentInDatabase: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interfaceCouchDatabase.html">CouchDatabase</a> *)&#160;</td>
          <td class="paramname"><em>database</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new "untitled" model with a new unsaved document. </p>
<p>The document won't be written to the database until -save is called. </p>

</div>
</div>
<a class="anchor" id="a92896d1106ca5012c96e60107a680ab1"></a><!-- doxytag: member="CouchModel::init" ref="a92896d1106ca5012c96e60107a680ab1" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) init </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a new "untitled" model object with no document or database at all yet. </p>
<p>Setting its .database property will cause it to create a <a class="el" href="interfaceCouchDocument.html" title="A CouchDB document, aka &quot;record&quot; aka &quot;row&quot;.">CouchDocument</a>. (This method is mostly here so that NSController objects can create CouchModels.) </p>

</div>
</div>
<a class="anchor" id="a1388498ae6ae967c7ae6ba7ac90436f2"></a><!-- doxytag: member="CouchModel::save" ref="a1388498ae6ae967c7ae6ba7ac90436f2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interfaceRESTOperation.html">RESTOperation</a>*) save </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Writes any changes to a new revision of the document, asynchronously. </p>
<p>Does nothing and returns nil if no changes have been made. </p>

</div>
</div>
<a class="anchor" id="a2b2ac66c9a991a9b7ff4c602fe6cadef"></a><!-- doxytag: member="CouchModel::propertiesToSave" ref="a2b2ac66c9a991a9b7ff4c602fe6cadef" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSDictionary*) propertiesToSave </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The document's current properties, in externalized JSON format. </p>

</div>
</div>
<a class="anchor" id="ac56b79c68cb38e51a27514ef56f3fa31"></a><!-- doxytag: member="CouchModel::deleteDocument" ref="ac56b79c68cb38e51a27514ef56f3fa31" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interfaceRESTOperation.html">RESTOperation</a>*) deleteDocument </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes the document from the database. </p>
<p>You can still use the model object afterwards, but it will refer to the deleted revision. </p>

</div>
</div>
<a class="anchor" id="a555ee3fd25954aae0018b0e1ffa0a18b"></a><!-- doxytag: member="CouchModel::saveModels:" ref="a555ee3fd25954aae0018b0e1ffa0a18b" args="(NSArray *models)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">+ (<a class="el" href="interfaceRESTOperation.html">RESTOperation</a>*) saveModels: </td>
          <td></td>
          <td class="paramtype">(NSArray *)&#160;</td>
          <td class="paramname"><em>models</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Bulk-saves changes to multiple model objects (which must all be in the same database). </p>
<p>This invokes -[<a class="el" href="interfaceCouchDatabase.html" title="A CouchDB database; contains CouchDocuments.">CouchDatabase</a> putChanges:], which sends a single request to _bulk_docs. Any unchanged models in the array are ignored. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">models</td><td>An array of <a class="el" href="interfaceCouchModel.html" title="Generic model class for Couch documents.">CouchModel</a> objects, which must all be in the same database. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>A <a class="el" href="interfaceRESTOperation.html" title="Represents an HTTP request to a RESTResource, and its response.">RESTOperation</a> that saves all changes, or nil if none of the models need saving. </dd></dl>

</div>
</div>
<a class="anchor" id="a13e10962997149aca9870e2a4fcbb6e2"></a><!-- doxytag: member="CouchModel::markExternallyChanged" ref="a13e10962997149aca9870e2a4fcbb6e2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) markExternallyChanged </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resets the timeSinceExternallyChanged property to zero. </p>

</div>
</div>
<a class="anchor" id="a2c0b406cb0278a80cbc51fc96ec86837"></a><!-- doxytag: member="CouchModel::getValueOfProperty:" ref="a2c0b406cb0278a80cbc51fc96ec86837" args="(NSString *property)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) getValueOfProperty: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>property</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Gets a property by name. </p>
<p>You can use this for document properties that you haven't added @property declarations for. </p>

<p>Implements <a class="el" href="interfaceCouchDynamicObject.html#ade9f65c71d5f45d00f439fd754da7896">CouchDynamicObject</a>.</p>

</div>
</div>
<a class="anchor" id="a108cad119ff627a2c665d1c988c8937f"></a><!-- doxytag: member="CouchModel::setValue:ofProperty:" ref="a108cad119ff627a2c665d1c988c8937f" args="(id value,[ofProperty] NSString *property)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) setValue: </td>
          <td></td>
          <td class="paramtype">(id)&#160;</td>
          <td class="paramname"><em>value</em></td>
        </tr>
        <tr>
          <td class="paramkey">ofProperty:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>property</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets a property by name. </p>
<p>You can use this for document properties that you haven't added @property declarations for. </p>

<p>Implements <a class="el" href="interfaceCouchDynamicObject.html#a7141c1eca3a1fd9e01140a4cc07d029b">CouchDynamicObject</a>.</p>

</div>
</div>
<a class="anchor" id="a8d6a5741df258e9ea7a98906cb1616d1"></a><!-- doxytag: member="CouchModel::attachmentNamed:" ref="a8d6a5741df258e9ea7a98906cb1616d1" args="(NSString *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interfaceCouchAttachment.html">CouchAttachment</a>*) attachmentNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>name</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Looks up the attachment with the given name (without fetching its contents). </p>

</div>
</div>
<a class="anchor" id="a8a4b8ba6030a487b023a38c8455cbc1a"></a><!-- doxytag: member="CouchModel::createAttachmentWithName:type:body:" ref="a8a4b8ba6030a487b023a38c8455cbc1a" args="(NSString *name,[type] NSString *contentType,[body] NSData *body)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interfaceCouchAttachment.html">CouchAttachment</a>*) createAttachmentWithName: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>name</em></td>
        </tr>
        <tr>
          <td class="paramkey">type:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>contentType</em></td>
        </tr>
        <tr>
          <td class="paramkey">body:</td>
          <td></td>
          <td class="paramtype">(NSData *)&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates or updates an attachment (in memory). </p>
<p>The attachment data will be written to the database at the same time as property changes are saved. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>The attachment name. </td></tr>
    <tr><td class="paramname">contentType</td><td>The MIME type of the body. </td></tr>
    <tr><td class="paramname">body</td><td>The raw attachment data, or nil to delete the attachment. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5625af6098ee1d1ff96a6d771b9764c5"></a><!-- doxytag: member="CouchModel::removeAttachmentNamed:" ref="a5625af6098ee1d1ff96a6d771b9764c5" args="(NSString *name)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) removeAttachmentNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>name</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Deletes (in memory) any existing attachment with the given name. </p>
<p>The attachment will be deleted from the database at the same time as property changes are saved. </p>

</div>
</div>
<a class="anchor" id="a81b7a07079896f59a03c4a388e1d443b"></a><!-- doxytag: member="CouchModel::initWithDocument:" ref="a81b7a07079896f59a03c4a388e1d443b" args="(CouchDocument *document)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (id) initWithDocument: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interfaceCouchDocument.html">CouchDocument</a> *)&#160;</td>
          <td class="paramname"><em>document</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Designated initializer. </p>
<p>Do not call directly except from subclass initializers; to create a new instance call +modelForDocument: instead. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">document</td><td>The document. Nil if this is created new (-init was called). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a33028beee6c908ada9cb4e9be5d7dca9"></a><!-- doxytag: member="CouchModel::idForNewDocumentInDatabase:" ref="a33028beee6c908ada9cb4e9be5d7dca9" args="(CouchDatabase *db)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString*) idForNewDocumentInDatabase: </td>
          <td></td>
          <td class="paramtype">(<a class="el" href="interfaceCouchDatabase.html">CouchDatabase</a> *)&#160;</td>
          <td class="paramname"><em>db</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The document ID to use when creating a new document. </p>
<p>Default is nil, which means to assign no ID (the server will assign one). </p>

</div>
</div>
<a class="anchor" id="a13aa73db92e5023fbe90000f7c60707e"></a><!-- doxytag: member="CouchModel::didLoadFromDocument" ref="a13aa73db92e5023fbe90000f7c60707e" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) didLoadFromDocument </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Called when the model's properties are reloaded from the document. </p>
<p>This happens both when initialized from a document, and after an external change. </p>

</div>
</div>
<a class="anchor" id="aca9177926e4614f6275f96d11288caae"></a><!-- doxytag: member="CouchModel::databaseForModelProperty:" ref="aca9177926e4614f6275f96d11288caae" args="(NSString *propertyName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interfaceCouchDatabase.html">CouchDatabase</a>*) databaseForModelProperty: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>propertyName</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the database in which to look up the document ID of a model-valued property. </p>
<p>Defaults to the same database as the receiver's document. You should override this if a document property contains the ID of a document in a different database. </p>

</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="a9b690fa2ea88e4e228e672dc553d393c"></a><!-- doxytag: member="CouchModel::document" ref="a9b690fa2ea88e4e228e672dc553d393c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interfaceCouchDocument.html">CouchDocument</a>*) document<code> [read, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The document this item is associated with. </p>
<p>Will be nil if it's new and unsaved. </p>

</div>
</div>
<a class="anchor" id="a6ee5e60c15aa738113958d7db30f494b"></a><!-- doxytag: member="CouchModel::database" ref="a6ee5e60c15aa738113958d7db30f494b" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interfaceCouchDatabase.html">CouchDatabase</a>*) database<code> [read, write, retain]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The database the item's document belongs to. </p>
<p>Setting this property will assign the item to a database, creating a document. Setting it to nil will delete its document from its database. </p>

</div>
</div>
<a class="anchor" id="a63fbfd1e32a28fb1425aea2310f9b346"></a><!-- doxytag: member="CouchModel::autosaves" ref="a63fbfd1e32a28fb1425aea2310f9b346" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (bool) autosaves<code> [read, write, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Should changes be saved back to the database automatically? Defaults to NO, requiring you to call -save manually. </p>

</div>
</div>
<a class="anchor" id="aa62db60d053b4e5045a3aada7077f3e4"></a><!-- doxytag: member="CouchModel::timeSinceExternallyChanged" ref="aa62db60d053b4e5045a3aada7077f3e4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSTimeInterval) timeSinceExternallyChanged<code> [read, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The time interval since the document was last changed externally (e.g. </p>
<p>by a "pull" replication. This value can be used to highlight recently-changed objects in the UI. </p>

</div>
</div>
<a class="anchor" id="a8ed3b496cca0e57a30079374c16e505d"></a><!-- doxytag: member="CouchModel::attachmentNames" ref="a8ed3b496cca0e57a30079374c16e505d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSArray*) attachmentNames<code> [read, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The names of all attachments (array of strings). </p>
<p>This reflects unsaved changes made by creating or deleting attachments. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Model/<a class="el" href="CouchModel_8h_source.html">CouchModel.h</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="interfaceCouchModel.html">CouchModel</a>      </li>
      <li class="footer">Generated on Wed Aug 29 2012 13:45:08 for CouchCocoa by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
