<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>CouchCocoa: CouchDesignDocument Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">CouchCocoa</div>
   <div id="projectbrief">An Objective-C API for CouchDB</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('interfaceCouchDesignDocument.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#properties">Properties</a>  </div>
  <div class="headertitle">
<div class="title">CouchDesignDocument Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="CouchDesignDocument" --><!-- doxytag: inherits="CouchDocument" -->
<p>A Design Document is a special document type that contains things like map/reduce functions, and the code and static resources for CouchApps.  
 <a href="interfaceCouchDesignDocument.html#details">More...</a></p>

<p><code>#import &lt;<a class="el" href="CouchDesignDocument_8h_source.html">CouchDesignDocument.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for CouchDesignDocument:</div>
<div class="dyncontent">
 <div class="center">
  <img src="interfaceCouchDesignDocument.png" usemap="#CouchDesignDocument_map" alt=""/>
  <map id="CouchDesignDocument_map" name="CouchDesignDocument_map">
<area href="interfaceCouchDocument.html" title="A CouchDB document, aka &quot;record&quot; aka &quot;row&quot;." alt="CouchDocument" shape="rect" coords="0,112,144,136"/>
<area href="interfaceCouchResource.html" title="Superclass of CouchDB model classes." alt="CouchResource" shape="rect" coords="0,56,144,80"/>
<area href="interfaceRESTResource.html" title="Represents an HTTP resource identified by a specific URL." alt="RESTResource" shape="rect" coords="0,0,144,24"/>
</map>
 </div></div>

<p><a href="classCouchDesignDocument-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interfaceCouchQuery.html">CouchQuery</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#a795389a6e4c1469fcbb4d9f499d1fcb6">queryViewNamed:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a query for the given named view.  <a href="#a795389a6e4c1469fcbb4d9f499d1fcb6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(BOOL)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#a1888f01c297c17293cd5fcd9163606f4">isLanguageAvailable:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether a given language is available for writing functions in, in this database.  <a href="#a1888f01c297c17293cd5fcd9163606f4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#a9aa12e57b591d66f258f2f934669f84b">mapFunctionOfViewNamed:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the map function of the view with the given name.  <a href="#a9aa12e57b591d66f258f2f934669f84b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(NSString *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#af8e765b6c87b54bdc9107379a83f4f38">reduceFunctionOfViewNamed:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the reduce function of the view with the given name.  <a href="#af8e765b6c87b54bdc9107379a83f4f38"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#aea25955362191613cf3315f006049a8c">defineViewNamed:map:reduce:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the definition of a view, or deletes it.  <a href="#aea25955362191613cf3315f006049a8c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#a5eb130406c0e950de996ed8666a85845">defineViewNamed:map:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">A shortcut that defines a simple view with no reduce function.  <a href="#a5eb130406c0e950de996ed8666a85845"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#a49c762069fc1b5280a85a6b25cd2a116">defineFilterNamed:asFunction:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the definition of a filter, or deletes it.  <a href="#a49c762069fc1b5280a85a6b25cd2a116"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(<a class="el" href="interfaceRESTOperation.html">RESTOperation</a> *)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#a5d1dc02a41f0fc6fb6e9c99fb08a8da5">saveChanges</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Saves changes, asynchronously.  <a href="#a5d1dc02a41f0fc6fb6e9c99fb08a8da5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#a7b8be4d14680492ebef8c83f596e7c89">defineViewNamed:mapBlock:version:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines or deletes a native view.  <a href="#a7b8be4d14680492ebef8c83f596e7c89"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#ab5361b36d70f54b3e3d9053f56d87c5c">defineViewNamed:mapBlock:reduceBlock:version:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Defines or deletes a native view with both a map and a reduce function.  <a href="#ab5361b36d70f54b3e3d9053f56d87c5c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a45a383d3ba840e71c153f4415bce963a"></a><!-- doxytag: member="CouchDesignDocument::defineFilterNamed:block:" ref="a45a383d3ba840e71c153f4415bce963a" args="(NSString *filterName,[block] TDFilterBlock filterBlock)" -->
(void)&#160;</td><td class="memItemRight" valign="bottom">- <b>defineFilterNamed:block:</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">(void)&#160;</td><td class="memItemRight" valign="bottom">- <a class="el" href="interfaceCouchDesignDocument.html#a6f7df77f006b49c4d68a1a0067263906">setValidationBlock:</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">An Objective-C block that can validate any document being added/updated/deleted in this database.  <a href="#a6f7df77f006b49c4d68a1a0067263906"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="properties"></a>
Properties</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NSString *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchDesignDocument.html#a0994b466827b310412a2265966de2974">language</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The language that the functions in this design document are written in.  <a href="#a0994b466827b310412a2265966de2974"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NSArray *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchDesignDocument.html#a4ab9f87cdcd1ee77f06a3e4e4fe73cca">viewNames</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Fetches and returns the names of all the views defined in this design document.  <a href="#a4ab9f87cdcd1ee77f06a3e4e4fe73cca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NSDictionary *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchDesignDocument.html#a223336ee9dd11eb0f9e4d6ff68949057">filters</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The filter functions defined in this design document.  <a href="#a223336ee9dd11eb0f9e4d6ff68949057"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NSString *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchDesignDocument.html#ab89eaefef43717bf722760b75cf38680">validation</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The validation function, a JavaScript function that validates document contents.  <a href="#ab89eaefef43717bf722760b75cf38680"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchDesignDocument.html#aeafbfffa0071fcb5137f43d3e0c274bd">includeLocalSequence</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Should view query results include the document local sequence number in the index? Setting this to YES sets the 'local_seq' property of the design document's 'options' property to 'true'.  <a href="#aeafbfffa0071fcb5137f43d3e0c274bd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab2dc920adf3987f86020fcccd45f5389"></a><!-- doxytag: member="CouchDesignDocument::changed" ref="ab2dc920adf3987f86020fcccd45f5389" args="" -->
BOOL&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="interfaceCouchDesignDocument.html#ab2dc920adf3987f86020fcccd45f5389">changed</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Have the contents of the design document been changed in-memory but not yet saved? <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>A Design Document is a special document type that contains things like map/reduce functions, and the code and static resources for CouchApps. </p>
</div><hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a795389a6e4c1469fcbb4d9f499d1fcb6"></a><!-- doxytag: member="CouchDesignDocument::queryViewNamed:" ref="a795389a6e4c1469fcbb4d9f499d1fcb6" args="(NSString *viewName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interfaceCouchQuery.html">CouchQuery</a>*) queryViewNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>viewName</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Creates a query for the given named view. </p>
<p>If view definitions have been modified but not saved yet, they will be saved first. </p>

</div>
</div>
<a class="anchor" id="a1888f01c297c17293cd5fcd9163606f4"></a><!-- doxytag: member="CouchDesignDocument::isLanguageAvailable:" ref="a1888f01c297c17293cd5fcd9163606f4" args="(NSString *language)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) isLanguageAvailable: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>language</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Indicates whether a given language is available for writing functions in, in this database. </p>

</div>
</div>
<a class="anchor" id="a9aa12e57b591d66f258f2f934669f84b"></a><!-- doxytag: member="CouchDesignDocument::mapFunctionOfViewNamed:" ref="a9aa12e57b591d66f258f2f934669f84b" args="(NSString *viewName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString*) mapFunctionOfViewNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>viewName</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the map function of the view with the given name. </p>

</div>
</div>
<a class="anchor" id="af8e765b6c87b54bdc9107379a83f4f38"></a><!-- doxytag: member="CouchDesignDocument::reduceFunctionOfViewNamed:" ref="af8e765b6c87b54bdc9107379a83f4f38" args="(NSString *viewName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString*) reduceFunctionOfViewNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>viewName</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns the reduce function of the view with the given name. </p>

</div>
</div>
<a class="anchor" id="aea25955362191613cf3315f006049a8c"></a><!-- doxytag: member="CouchDesignDocument::defineViewNamed:map:reduce:" ref="aea25955362191613cf3315f006049a8c" args="(NSString *viewName,[map] NSString *mapFunction,[reduce] NSString *reduceFunction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) defineViewNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>viewName</em></td>
        </tr>
        <tr>
          <td class="paramkey">map:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>mapFunction</em></td>
        </tr>
        <tr>
          <td class="paramkey">reduce:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>reduceFunction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the definition of a view, or deletes it. </p>
<p>After making changes to one or more views, you should call -saveChanges to PUT them back to the database. If the new definition is identical to the existing one, the design document will not be marked as changed or saved back to the database. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">viewName</td><td>The name of the view, in the scope of this design doc. </td></tr>
    <tr><td class="paramname">mapFunction</td><td>The source code of the map function. If nil, the view will be deleted. </td></tr>
    <tr><td class="paramname">reduceFunction</td><td>The source code of the reduce function. Optional; pass nil for none. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5eb130406c0e950de996ed8666a85845"></a><!-- doxytag: member="CouchDesignDocument::defineViewNamed:map:" ref="a5eb130406c0e950de996ed8666a85845" args="(NSString *viewName,[map] NSString *mapFunction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) defineViewNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>viewName</em></td>
        </tr>
        <tr>
          <td class="paramkey">map:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>mapFunction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>A shortcut that defines a simple view with no reduce function. </p>
<p>After making changes to one or more views, you should call -saveChanges to PUT them back to the database. If the new definition is identical to the existing one, the design document will not be marked as changed or saved back to the database. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">viewName</td><td>The name of the view, in the scope of this design doc. </td></tr>
    <tr><td class="paramname">mapFunction</td><td>The source code of the map function. If nil, the view will be deleted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a49c762069fc1b5280a85a6b25cd2a116"></a><!-- doxytag: member="CouchDesignDocument::defineFilterNamed:asFunction:" ref="a49c762069fc1b5280a85a6b25cd2a116" args="(NSString *filterName,[asFunction] NSString *filterFunction)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) defineFilterNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>filterName</em></td>
        </tr>
        <tr>
          <td class="paramkey">asFunction:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>filterFunction</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sets the definition of a filter, or deletes it. </p>
<p>After making changes to one or more filters, you should call -saveChanges to PUT them back to the database. If the new definition is identical to the existing one, the design document will not be marked as changed or saved back to the database. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">filterName</td><td>The name of the filter, in the scope of this design doc. </td></tr>
    <tr><td class="paramname">filterFunction</td><td>The source code of the filter function. If nil, the filter will be deleted. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5d1dc02a41f0fc6fb6e9c99fb08a8da5"></a><!-- doxytag: member="CouchDesignDocument::saveChanges" ref="a5d1dc02a41f0fc6fb6e9c99fb08a8da5" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (<a class="el" href="interfaceRESTOperation.html">RESTOperation</a>*) saveChanges </td>
          <td></td>
          <td class="paramname"></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Saves changes, asynchronously. </p>
<p>If there are no current changes, returns nil. </p>

</div>
</div>
<a class="anchor" id="a7b8be4d14680492ebef8c83f596e7c89"></a><!-- doxytag: member="CouchDesignDocument::defineViewNamed:mapBlock:version:" ref="a7b8be4d14680492ebef8c83f596e7c89" args="(NSString *viewName,[mapBlock] TDMapBlock mapBlock,[version] NSString *version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) defineViewNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>viewName</em></td>
        </tr>
        <tr>
          <td class="paramkey">mapBlock:</td>
          <td></td>
          <td class="paramtype">(TDMapBlock)&#160;</td>
          <td class="paramname"><em>mapBlock</em></td>
        </tr>
        <tr>
          <td class="paramkey">version:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Defines or deletes a native view. </p>
<p>The view's definition is given as an Objective-C block (or NULL to delete the view). The body of the block should call the 'emit' block (passed in as a paramter) for every key/value pair it wants to write to the view. Since the function itself is obviously not stored in the database (only a unique string idenfitying it), you must re-define the view on every launch of the app! If the database needs to rebuild the view but the function hasn't been defined yet, it will fail and the view will be empty, causing weird problems later on. It is very important that this block be a law-abiding map function! As in other languages, it must be a "pure" function, with no side effects, that always emits the same values given the same input document. That means that it should not access or change any external state; be careful, since blocks make that so easy that you might do it inadvertently! The block may be called on any thread, or on multiple threads simultaneously. This won't be a problem if the code is "pure" as described above, since it will as a consequence also be thread-safe. </p>

</div>
</div>
<a class="anchor" id="ab5361b36d70f54b3e3d9053f56d87c5c"></a><!-- doxytag: member="CouchDesignDocument::defineViewNamed:mapBlock:reduceBlock:version:" ref="ab5361b36d70f54b3e3d9053f56d87c5c" args="(NSString *viewName,[mapBlock] TDMapBlock mapBlock,[reduceBlock] TDReduceBlock reduceBlock,[version] NSString *version)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) defineViewNamed: </td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>viewName</em></td>
        </tr>
        <tr>
          <td class="paramkey">mapBlock:</td>
          <td></td>
          <td class="paramtype">(TDMapBlock)&#160;</td>
          <td class="paramname"><em>mapBlock</em></td>
        </tr>
        <tr>
          <td class="paramkey">reduceBlock:</td>
          <td></td>
          <td class="paramtype">(TDReduceBlock)&#160;</td>
          <td class="paramname"><em>reduceBlock</em></td>
        </tr>
        <tr>
          <td class="paramkey">version:</td>
          <td></td>
          <td class="paramtype">(NSString *)&#160;</td>
          <td class="paramname"><em>version</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Defines or deletes a native view with both a map and a reduce function. </p>
<p>For details, read the documentation of the -defineViewNamed:mapBlock: method. </p>

</div>
</div>
<a class="anchor" id="a6f7df77f006b49c4d68a1a0067263906"></a><!-- doxytag: member="CouchDesignDocument::setValidationBlock:" ref="a6f7df77f006b49c4d68a1a0067263906" args="(TDValidationBlock validationBlock)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (void) setValidationBlock: </td>
          <td></td>
          <td class="paramtype">(TDValidationBlock)&#160;</td>
          <td class="paramname"><em>validationBlock</em></td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>An Objective-C block that can validate any document being added/updated/deleted in this database. </p>

</div>
</div>
<hr/><h2>Property Documentation</h2>
<a class="anchor" id="a0994b466827b310412a2265966de2974"></a><!-- doxytag: member="CouchDesignDocument::language" ref="a0994b466827b310412a2265966de2974" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString*) language<code> [read, write, copy]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The language that the functions in this design document are written in. </p>
<p>Defaults to kCouchLanguageJavaScript. </p>

</div>
</div>
<a class="anchor" id="a4ab9f87cdcd1ee77f06a3e4e4fe73cca"></a><!-- doxytag: member="CouchDesignDocument::viewNames" ref="a4ab9f87cdcd1ee77f06a3e4e4fe73cca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSArray*) viewNames<code> [read, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Fetches and returns the names of all the views defined in this design document. </p>
<p>The first call fetches the entire design document synchronously; subsequent calls are cached. </p>

</div>
</div>
<a class="anchor" id="a223336ee9dd11eb0f9e4d6ff68949057"></a><!-- doxytag: member="CouchDesignDocument::filters" ref="a223336ee9dd11eb0f9e4d6ff68949057" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSDictionary*) filters<code> [read, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The filter functions defined in this design document. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>An NSDictionary whose keys are filter names and values are function source code. </dd></dl>

</div>
</div>
<a class="anchor" id="ab89eaefef43717bf722760b75cf38680"></a><!-- doxytag: member="CouchDesignDocument::validation" ref="ab89eaefef43717bf722760b75cf38680" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (NSString*) validation<code> [read, write, copy]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The validation function, a JavaScript function that validates document contents. </p>

</div>
</div>
<a class="anchor" id="aeafbfffa0071fcb5137f43d3e0c274bd"></a><!-- doxytag: member="CouchDesignDocument::includeLocalSequence" ref="aeafbfffa0071fcb5137f43d3e0c274bd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">- (BOOL) includeLocalSequence<code> [read, write, assign]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Should view query results include the document local sequence number in the index? Setting this to YES sets the 'local_seq' property of the design document's 'options' property to 'true'. </p>
<p>This affects every view in this design document. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>Couch/<a class="el" href="CouchDesignDocument_8h_source.html">CouchDesignDocument.h</a></li>
</ul>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="interfaceCouchDesignDocument.html">CouchDesignDocument</a>      </li>
      <li class="footer">Generated on Wed Aug 29 2012 13:45:08 for CouchCocoa by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Properties</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
